<!-- Display message when there are no trades -->
<p *ngIf="combinedElements.length === 0">
  No hay comercios con los criterios requeridos
</p>

<!-- Display the cuit of the titular -->
<section id="titular" *ngIf="combinedElements.length != 0">
  <div class="m-5">
    <b class="text-lg">Comercios de titular del cuit: {{ cuit }} </b>
  </div>
</section>

<!-- Table for displaying trades -->
<div id="table" *ngIf="combinedElements.length != 0" class="h-auto">
  <!-- Filter input field -->
  <div class="p-5 h-auto">
    <mat-form-field id="filtro">
      <mat-label>Filtrar</mat-label>
      <input matInput [(ngModel)]="inputfilter" (input)="filterTable()" />
    </mat-form-field>
    <!-- Desktop view: Display trades in a table -->
    <div class="overflow-auto rounded-lg shadow hidden md:block">
      <table class="w-full" *ngIf="combinedElements.length > 0">
        <!-- Table header -->
        <thead class="bg-gray-200 border-b-2 border-gray-200">
          <tr>
            <th (click)="marcarNegrita('number')" (mouseenter)="entrada()" (mouseleave)="salida()"
              class="w-40 p-3 text-sm front-semibold tracking-wide text-left cursor-pointer">
              Numero de bloque
              <mat-icon #flechitaElement [style.visibility]="
                  entro || click == 1 || click == 2 ? 'visible' : 'hidden'
                " class="flechita" [ngClass]="{
                  negrita: textoMarcado,
                  entrada: entb,
                  salida: salb
                }">
                {{ click == 2 ? "south" : "north" }}
              </mat-icon>
            </th>

            <th (click)="marcarNegrita('startTimeBlock')" (mouseenter)="entrada()" (mouseleave)="salida()"
              class="w-40 p-3 text-sm front-semibold tracking-wide text-left cursor-pointer">
              Hora de inicio
              <mat-icon #flechitaElement [style.visibility]="
                  entro || click == 1 || click == 2 ? 'visible' : 'hidden'
                " class="flechita" [ngClass]="{
                  negrita: textoMarcado,
                  entrada: entb,
                  salida: salb
                }">
                {{ click == 2 ? "south" : "north" }}
              </mat-icon>
            </th>

            <th (click)="marcarNegrita('precio')" (mouseenter)="entrada()" (mouseleave)="salida()"
              class="w-40 p-3 text-sm front-semibold tracking-wide text-left cursor-pointer">
              Precio
              <mat-icon #flechitaElement [style.visibility]="
                  entro || click == 1 || click == 2 ? 'visible' : 'hidden'
                " class="flechita" [ngClass]="{
                  negrita: textoMarcado,
                  entrada: entb,
                  salida: salb
                }">
                {{ click == 2 ? "south" : "north" }}
              </mat-icon>
            </th>

            <th (click)="marcarNegrita('startTime')" (mouseenter)="entrada()" (mouseleave)="salida()"
              class="w-40 p-3 text-sm front-semibold tracking-wide text-left cursor-pointer">
              Fecha Actualizaci√≥n
              <mat-icon #flechitaElement [style.visibility]="
                  entro || click == 1 || click == 2 ? 'visible' : 'hidden'
                " class="flechita" [ngClass]="{
                  negrita: textoMarcado,
                  entrada: entb,
                  salida: salb
                }">
                {{ click == 2 ? "south" : "north" }}
              </mat-icon>
            </th>
          </tr>
        </thead>
        <!-- Table body -->
        <tbody class="divide-y divide-gray-100">
          <tr *ngFor="let trade of combinedElements" class="bg-white">
            <td class="p-3 text-sm text-gray-700 whitespace-nowrap">
              {{ trade.number }}
            </td>
            <td class="p-3 text-sm text-gray-700 whitespace-nowrap">
              {{ trade.startTimeBlock }}
            </td>
            <td class="p-3 text-sm text-gray-700 whitespace-nowrap">
              {{ trade.precio }}
            </td>
            <td class="p-3 text-sm text-gray-700 whitespace-nowrap">
              {{ trade.startTime }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- Mobile view: Display trades as cards -->
   <div *ngIf="combinedElements.length > 0" class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:hidden">
  <div id="tarjetas" *ngFor="let trade of combinedElements" class="bg-white space-y-2 p-4 rounded-lg shadow relative">
    <div class="flex items-center space-x-2 text-sm">
      <div>
        <a href="#" class="text-blue font-bold hover:underline">Nro: {{ trade.number }}</a>
      </div>
      <div class="text-gray-500">{{ trade.startTimeBlock }}</div>
    </div>

    <ng-container *ngIf="visibleContent[trade.idBlock]">
      <div class="text-sm text-gray-700">
        <a href="#" class="font-bold text-blue-500 hover:underline">${{ trade.precio }}</a>
      </div>
      <div class="text-sm text-gray-700">{{ trade.startTime }}</div>
      <!-- <div class="text-sm font-medium text-black">{{ trade.id }}</div>
      <div class="text-sm font-medium text-black">{{ trade.idBlock }}</div> -->
    </ng-container>


    <button id="flechita" *ngIf="isScreenSmall()" (click)="toggleCardContent(trade)" class="absolute top-0 right-0 p-2 focus:outline-none group"
      [@rotateArrow]="visibleContent[trade.idBlock] ? 'up' : 'down'">
      <mat-icon class="text-gray-500">expand_more</mat-icon>
    </button>
  </div>
</div>

  </div>
</div>
